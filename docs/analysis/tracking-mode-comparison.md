# ë¶„ë¦¬í˜• ì„ íƒì vs ì¼ë°˜ ëª¨ë“œ ë¹„êµ ë¶„ì„

## ê°œìš”

kwcag-a11y-inspectorëŠ” ë‘ ê°€ì§€ ìš”ì†Œ í•˜ì´ë¼ì´íŠ¸ ë°©ì‹ì„ ì œê³µí•©ë‹ˆë‹¤:

1. **ë¶„ë¦¬í˜• ì„ íƒì (Tracking Mode)**: ë³„ë„ì˜ ì˜¤ë²„ë ˆì´ div ìš”ì†Œ ì‚¬ìš©
2. **ì¼ë°˜ ëª¨ë“œ (Inline Outline Mode)**: CSS outline ì†ì„± ì§ì ‘ ì ìš©

## 1. ë¶„ë¦¬í˜• ì„ íƒì (Tracking Mode)

### í™œì„±í™” ì¡°ê±´

- `trackingmode === true`
- ë§í¬ ëª¨ë“œ ON ì‹œ ìë™ í™œì„±í™”

### ë™ì‘ ë°©ì‹

#### ìš”ì†Œ ìƒì„± (src/content/inspector/inspector-core.ts:63-76)

```typescript
trackingEl = document.createElement('div');
trackingEl.id = 'dkInspect_tracking';
```

ë³„ë„ì˜ div ìš”ì†Œë¥¼ ìƒì„±í•˜ì—¬ bodyì— ì¶”ê°€í•©ë‹ˆë‹¤.

#### ìŠ¤íƒ€ì¼ ì ìš© (src/content/inspector/inspector.css:98-106)

```css
#dkInspect_tracking {
  position: absolute !important;
  z-index: 2000005 !important;
  outline-width: 2px !important;
  outline-offset: -1px !important;
  cursor: none !important;
  pointer-events: none !important;
}
```

#### ìœ„ì¹˜ ë° í¬ê¸° ê³„ì‚° (src/content/inspector/event-handlers.ts:147-153)

```typescript
trackingEl!.style.width = `${getWidth(targetElement)}px`;
trackingEl!.style.height = `${getHeight(targetElement)}px`;
trackingEl!.style.left = `${getLeft(targetElement)}px`;
trackingEl!.style.top = `${getTop(targetElement)}px`;
trackingEl!.style.display = 'block';
```

ëŒ€ìƒ ìš”ì†Œì˜ ì •í™•í•œ ìœ„ì¹˜ì™€ í¬ê¸°ë¥¼ ê³„ì‚°í•˜ì—¬ ì˜¤ë²„ë ˆì´ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.

#### ìƒ‰ìƒ ë° ë°°ê²½ ì„¤ì • (src/content/inspector/inspector-core.ts:84-94)

```typescript
setColor(element: HTMLElement, hex: string): void {
  element.style.setProperty('outline-color', hex, 'important');
  if (opt.bgmode) {
    element.style.setProperty(
      'background-color',
      this.hexToRGB(hex, 0.2),  // 20% íˆ¬ëª…ë„
      'important',
    );
  }
}
```

### ì¥ì 

1. âœ… **DOM êµ¬ì¡° ë³´ì¡´**: ì›ë³¸ ìš”ì†Œë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ì•ŠìŒ
2. âœ… **ë°°ê²½ìƒ‰ í‘œì‹œ ê°€ëŠ¥**: `bgmode` ì˜µì…˜ìœ¼ë¡œ ë°˜íˆ¬ëª… ë°°ê²½ ì¶”ê°€
3. âœ… **ì‹œê°ì  ëª…í™•ì„±**: ì˜¤ë²„ë ˆì´ í˜•íƒœë¡œ ìš”ì†Œ ì˜ì—­ì´ ë” ëª…í™•íˆ ë³´ì„
4. âœ… **ì¼ê´€ëœ ë Œë”ë§**: ìš”ì†Œì˜ CSSì— ì˜í–¥ë°›ì§€ ì•ŠìŒ
5. âœ… **z-index ì œì–´**: í•­ìƒ ìµœìƒë‹¨ ë ˆì´ì–´ì— í‘œì‹œ

### ë‹¨ì 

1. âŒ **ìœ„ì¹˜ ê³„ì‚° ì˜¤ë²„í—¤ë“œ**: ìŠ¤í¬ë¡¤, ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ì¬ê³„ì‚° í•„ìš”
2. âŒ **ì¶”ê°€ DOM ìš”ì†Œ**: ë³„ë„ì˜ div ìš”ì†Œ ìƒì„± ë° ê´€ë¦¬
3. âŒ **ë³µì¡í•œ ë¡œì§**: ìœ„ì¹˜/í¬ê¸° ë™ê¸°í™” ë¡œì§ í•„ìš”

### ì‚¬ìš© ì‚¬ë¡€

- ë§í¬ ëª¨ë“œ ON (ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ ê²€ì‚¬)
- í´ë¦­ ì˜ì—­ í¬ê¸°ë¥¼ ëª…í™•íˆ í™•ì¸í•´ì•¼ í•  ë•Œ
- ë°°ê²½ìƒ‰ìœ¼ë¡œ ìš”ì†Œë¥¼ ê°•ì¡°í•´ì•¼ í•  ë•Œ

---

## 2. ì¼ë°˜ ëª¨ë“œ (Inline Outline Mode)

### í™œì„±í™” ì¡°ê±´

- `trackingmode === false`
- ë§í¬ ëª¨ë“œ OFF ì‹œ ìë™ í™œì„±í™”

### ë™ì‘ ë°©ì‹

#### ìŠ¤íƒ€ì¼ ì§ì ‘ ì ìš© (src/content/inspector/event-handlers.ts:191-213)

```typescript
targetElement.style.setProperty(
  'outline-width',
  `${opt.bordersize}px`,
  'important',
);
targetElement.style.setProperty('outline-color', opt.colortype, 'important');
targetElement.style.setProperty('outline-style', opt.linetype, 'important');
targetElement.style.setProperty(
  'outline-offset',
  `-${opt.bordersize}px`,
  'important',
);
```

ëŒ€ìƒ ìš”ì†Œì˜ style ì†ì„±ì— outlineì„ ì§ì ‘ ì„¤ì •í•©ë‹ˆë‹¤.

#### ì œê±° ë¡œì§ (src/content/inspector/event-handlers.ts:354-357)

```typescript
lastHoveredElement.style.outlineWidth = '';
lastHoveredElement.style.outlineColor = '';
lastHoveredElement.style.outlineStyle = '';
lastHoveredElement.style.outlineOffset = '';
```

ë§ˆìš°ìŠ¤ ì•„ì›ƒ ì‹œ style ì†ì„±ì„ ë¹ˆ ë¬¸ìì—´ë¡œ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

### ì¥ì 

1. âœ… **ë‹¨ìˆœí•œ êµ¬í˜„**: CSS ì†ì„±ë§Œ ë³€ê²½
2. âœ… **ì ì€ ì˜¤ë²„í—¤ë“œ**: ìœ„ì¹˜ ê³„ì‚° ë¶ˆí•„ìš”
3. âœ… **ë¹ ë¥¸ ì„±ëŠ¥**: ë¸Œë¼ìš°ì € ë„¤ì´í‹°ë¸Œ outline ë Œë”ë§
4. âœ… **ë©”ëª¨ë¦¬ íš¨ìœ¨**: ì¶”ê°€ DOM ìš”ì†Œ ì—†ìŒ

### ë‹¨ì 

1. âŒ **ë°°ê²½ìƒ‰ ë¯¸ì§€ì›**: outlineì€ ë°°ê²½ìƒ‰ì„ í‘œì‹œí•  ìˆ˜ ì—†ìŒ
2. âŒ **CSS ì¶©ëŒ ê°€ëŠ¥**: ìš”ì†Œì˜ ê¸°ì¡´ outline ìŠ¤íƒ€ì¼ê³¼ ì¶©ëŒ ê°€ëŠ¥
3. âŒ **outline-offset ì œí•œ**: ìŒìˆ˜ offsetì´ ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ë™ì¼í•˜ê²Œ ë Œë”ë§ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ

### ì‚¬ìš© ì‚¬ë¡€

- ë§í¬ ëª¨ë“œ OFF (ëª¨ë“  ìš”ì†Œ ê²€ì‚¬)
- ë¹ ë¥¸ ìš”ì†Œ ìŠ¤ìº”ì´ í•„ìš”í•  ë•Œ
- ê°€ë²¼ìš´ ë™ì‘ì´ í•„ìš”í•  ë•Œ

---

## ë¹„êµí‘œ

| í•­ëª©              | ë¶„ë¦¬í˜• ì„ íƒì (Tracking Mode)       | ì¼ë°˜ ëª¨ë“œ (Inline Outline)  |
| ----------------- | ----------------------------------- | --------------------------- |
| **í™œì„±í™”**        | `trackingmode = true`               | `trackingmode = false`      |
| **êµ¬í˜„ ë°©ì‹**     | ë³„ë„ div ìš”ì†Œ (#dkInspect_tracking) | CSS outline ì†ì„± ì§ì ‘ ì ìš©  |
| **ë°°ê²½ìƒ‰ í‘œì‹œ**   | âœ… ì§€ì› (bgmode ì˜µì…˜)               | âŒ ë¯¸ì§€ì›                   |
| **íˆ¬ëª…ë„**        | âœ… 20% íˆ¬ëª…ë„ ì§€ì›                  | âŒ ë¶ˆê°€ëŠ¥                   |
| **ìœ„ì¹˜ ê³„ì‚°**     | âœ… ì •í™•í•œ ìœ„ì¹˜/í¬ê¸° ê³„ì‚°            | âŒ ë¶ˆí•„ìš” (ë¸Œë¼ìš°ì €ê°€ ì²˜ë¦¬) |
| **ì„±ëŠ¥**          | ğŸŸ¡ ì¤‘ê°„ (ê³„ì‚° ì˜¤ë²„í—¤ë“œ)             | âœ… ë¹ ë¦„ (ë„¤ì´í‹°ë¸Œ ë Œë”ë§)   |
| **DOM ì˜í–¥**      | ğŸŸ¡ ì¶”ê°€ ìš”ì†Œ ìƒì„±                   | âœ… ì—†ìŒ (ì†ì„±ë§Œ ë³€ê²½)       |
| **CSS ì¶©ëŒ**      | âœ… ì—†ìŒ (ë…ë¦½ì  ìš”ì†Œ)               | ğŸŸ¡ ê°€ëŠ¥ (inline style)      |
| **ì‹œê°ì  ëª…í™•ì„±** | âœ… ë†’ìŒ (ì˜¤ë²„ë ˆì´)                  | ğŸŸ¡ ë³´í†µ (outlineë§Œ)         |
| **ë©”ëª¨ë¦¬ ì‚¬ìš©**   | ğŸŸ¡ ì¶”ê°€ ìš”ì†Œ ë©”ëª¨ë¦¬                 | âœ… ìµœì†Œ                     |
| **z-index ì œì–´**  | âœ… ì™„ì „ ì œì–´ (2000005)              | ğŸŸ¡ ìš”ì†Œì— ì˜ì¡´              |

---

## ì½”ë“œ ê²½ë¡œ ë¹„êµ

### ë¶„ë¦¬í˜• ì„ íƒì ì‹¤í–‰ ê²½ë¡œ

```
1. Inspector.enable()
   â†’ tracking.generate()
   â†’ #dkInspect_tracking div ìƒì„±

2. handleMouseOver()
   â†’ findInteractiveAncestor()
   â†’ getWidth/Height/Left/Top()
   â†’ trackingEl ìœ„ì¹˜/í¬ê¸° ì—…ë°ì´íŠ¸
   â†’ trackingEl.style.display = 'block'

3. handleMouseOut()
   â†’ trackingEl.style.display = 'none'

4. Inspector.disable()
   â†’ trackingEl ì œê±°
```

### ì¼ë°˜ ëª¨ë“œ ì‹¤í–‰ ê²½ë¡œ

```
1. Inspector.enable()
   â†’ (tracking ìš”ì†Œ ìƒì„± ì•ˆ í•¨)

2. handleMouseOver()
   â†’ ì´ì „ ìš”ì†Œ outline ì œê±°
   â†’ targetElement.style.setProperty('outline-*')
   â†’ lastHoveredElement = targetElement

3. handleMouseOut()
   â†’ lastHoveredElement.style.outline* = ''
   â†’ lastHoveredElement = null

4. Inspector.disable()
   â†’ ëª¨ë“  ìš”ì†Œì—ì„œ outline ì œê±°
```

---

## ì„¤ì • ì—°ë™

### ìë™ ëª¨ë“œ ì „í™˜ (src/options/settings.ts:636-648)

```typescript
// ë§í¬ ëª¨ë“œì— ë”°ë¼ trackingmode ìë™ ì„¤ì •
const trackingmode = lm_sw === STATE_ENABLED;

// ë§í¬ ëª¨ë“œê°€ OFFì¼ ë•ŒëŠ” ë°°ê²½ ëª¨ë“œë„ OFFë¡œ ì„¤ì •
const finalBgMode = lm_sw === STATE_ENABLED ? bg_sw : false;
```

### UI ì—°ë™ (src/options/settings.html:240-267)

```html
ë§í¬ ëª¨ë“œ ON â†’ trackingmode = true â†’ ë°°ê²½ ì˜µì…˜ í™œì„±í™” ë§í¬ ëª¨ë“œ OFF â†’
trackingmode = false â†’ ë°°ê²½ ì˜µì…˜ ë¹„í™œì„±í™”
```

---

## ì‚¬ìš©ì ê´€ì  ì°¨ì´

### ë¶„ë¦¬í˜• ì„ íƒì (ë§í¬ ëª¨ë“œ ON)

```
ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â”‚  â† ë°˜íˆ¬ëª… ë°°ê²½ (bgmode ON)
â”‚   <button>í´ë¦­</button>  â”‚
â”‚   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†‘ outline í…Œë‘ë¦¬
```

**íŠ¹ì§•:**

- ìš”ì†Œ ì „ì²´ê°€ ë°˜íˆ¬ëª… ìƒ‰ìƒìœ¼ë¡œ ì±„ì›Œì§ (ì„ íƒ ì‹œ)
- í´ë¦­ ì˜ì—­ì´ ì‹œê°ì ìœ¼ë¡œ ëª…í™•í•¨
- ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œë§Œ í‘œì‹œ

### ì¼ë°˜ ëª¨ë“œ (ë§í¬ ëª¨ë“œ OFF)

```
ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   <div>ì¼ë°˜ ìš”ì†Œ</div>   â”‚  â† outlineë§Œ í‘œì‹œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†‘ outline í…Œë‘ë¦¬ë§Œ
```

**íŠ¹ì§•:**

- í…Œë‘ë¦¬ë§Œ í‘œì‹œ (ë°°ê²½ìƒ‰ ì—†ìŒ)
- ê°€ë³ê³  ë¹ ë¥¸ ë™ì‘
- ëª¨ë“  ìš”ì†Œ í‘œì‹œ

---

## ì„±ëŠ¥ ë¹„êµ

### ë¶„ë¦¬í˜• ì„ íƒì

- **ì´ˆê¸°í™”**: ~2ms (div ìƒì„±)
- **ë§ˆìš°ìŠ¤ ì˜¤ë²„**: ~1-2ms (ìœ„ì¹˜ ê³„ì‚° + ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸)
- **ë§ˆìš°ìŠ¤ ë¬´ë¸Œ**: ~0.5ms (throttled)
- **ë©”ëª¨ë¦¬**: ~5KB (div + ìŠ¤íƒ€ì¼)

### ì¼ë°˜ ëª¨ë“œ

- **ì´ˆê¸°í™”**: ~0ms (ì—†ìŒ)
- **ë§ˆìš°ìŠ¤ ì˜¤ë²„**: ~0.3ms (ìŠ¤íƒ€ì¼ ì„¤ì •)
- **ë§ˆìš°ìŠ¤ ë¬´ë¸Œ**: ~0ms (ìœ„ì¹˜ ê³„ì‚° ì—†ìŒ)
- **ë©”ëª¨ë¦¬**: ~1KB (ìŠ¤íƒ€ì¼ ì†ì„±ë§Œ)

---

## ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­

### ë¶„ë¦¬í˜• ì„ íƒì ì£¼ì˜ì 

1. **ìŠ¤í¬ë¡¤ ì²˜ë¦¬**: ìŠ¤í¬ë¡¤ ì‹œ ìœ„ì¹˜ ì¬ê³„ì‚° í•„ìš” ì—†ìŒ (absolute ê¸°ì¤€ì´ document)
2. **ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬**: ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ìœ„ì¹˜ ì¬ê³„ì‚° ë¶ˆí•„ìš” (mouseover ì‹œ ì¬ê³„ì‚°)
3. **Transform ìš”ì†Œ**: transformì´ ì ìš©ëœ ìš”ì†ŒëŠ” ìœ„ì¹˜ ê³„ì‚°ì´ ë¶€ì •í™•í•  ìˆ˜ ìˆìŒ

### ì¼ë°˜ ëª¨ë“œ ì£¼ì˜ì 

1. **Outline ìš°ì„ ìˆœìœ„**: `!important` ì‚¬ìš©ìœ¼ë¡œ ê¸°ì¡´ outline ë®ì–´ì”€
2. **Inline ìŠ¤íƒ€ì¼**: ìš”ì†Œì˜ style ì†ì„±ì— ì§ì ‘ ì¶”ê°€ë¨
3. **ë§ˆìš°ìŠ¤ ì•„ì›ƒ**: ë°˜ë“œì‹œ ì´ì „ outline ì œê±° í•„ìš”

---

## ê²°ë¡ 

### ì–¸ì œ ë¶„ë¦¬í˜• ì„ íƒìë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜?

- âœ… ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ(ë§í¬, ë²„íŠ¼) ê²€ì‚¬ ì‹œ
- âœ… í´ë¦­ ì˜ì—­ í¬ê¸°ë¥¼ ëª…í™•íˆ í™•ì¸í•´ì•¼ í•  ë•Œ
- âœ… ë°°ê²½ìƒ‰ìœ¼ë¡œ ìš”ì†Œë¥¼ ê°•ì¡°í•´ì•¼ í•  ë•Œ
- âœ… ì‹œê°ì ìœ¼ë¡œ ëª…í™•í•œ í‘œì‹œê°€ í•„ìš”í•  ë•Œ

### ì–¸ì œ ì¼ë°˜ ëª¨ë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜?

- âœ… ëª¨ë“  ìš”ì†Œë¥¼ ë¹ ë¥´ê²Œ ê²€ì‚¬í•´ì•¼ í•  ë•Œ
- âœ… ì„±ëŠ¥ì´ ì¤‘ìš”í•œ ê²½ìš°
- âœ… ê°€ë²¼ìš´ ì‹œê°ì  í‘œì‹œë§Œ í•„ìš”í•  ë•Œ
- âœ… ë°°ê²½ìƒ‰ í‘œì‹œê°€ ë¶ˆí•„ìš”í•œ ê²½ìš°

### í˜„ì¬ êµ¬í˜„ì˜ ì¥ì 

ë§í¬ ëª¨ë“œì— ë”°ë¼ ìë™ìœ¼ë¡œ ìµœì ì˜ ë°©ì‹ì„ ì„ íƒ:

- **ë§í¬ ëª¨ë“œ ON** â†’ ë¶„ë¦¬í˜• ì„ íƒì (ì‹œê°ì  ëª…í™•ì„± ìš°ì„ )
- **ë§í¬ ëª¨ë“œ OFF** â†’ ì¼ë°˜ ëª¨ë“œ (ì„±ëŠ¥ ìš°ì„ )

ì´ëŠ” ì‚¬ìš©ìê°€ ëª¨ë“œë¥¼ ì „í™˜í•  í•„ìš” ì—†ì´ ìë™ìœ¼ë¡œ ìµœì ì˜ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
