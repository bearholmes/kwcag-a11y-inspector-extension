{"version":3,"file":"cals.js","names":["ELEMENT_IDS","CONTAINER","INPUT_HEIGHT","INPUT_WIDTH","BTN_SUBMIT","BTN_CLOSE","RESULT","CSS_CLASSES","PROPERTY","BUTTON","STORAGE_KEYS","RESOLUTIONS","MONITORS","CALCULATION_CONSTANTS","MM_PER_INCH","DECIMAL_PLACES_STANDARD","DECIMAL_PLACES_RESULT","ERROR_MESSAGES","INVALID_INPUT","MISSING_ELEMENT","STORAGE_ERROR","CALCULATION_ERROR","doc","document","$","id","console","error","getElementById","readData","myKey","Promise","resolve","reject","Error","chrome","storage","sync","get","data","runtime","lastError","message","validateNumericInput","value","undefined","num","Number","isNaN","isFinite","validateElement","element","elementName","displayError","resultElement","textContent","errorDiv","createElement","style","color","padding","appendChild","alert","cals","initialize","container","header","createTextNode","inputContainer","ul","list","forEach","item","li","innerHTML","result","body","window","getElementsByTagName","close","removeChild","submit","heightInput","widthInput","h","w","setDiagonal","cb","res","height","width","diagonal","diagonal_px","span","resolution","monitor","callback","resolutionsData","monitorsData","resolutions","monitors","std_res","split","length","resWidth","parseInt","resHeight","std_diagonal","Math","sqrt","pow","toFixed","monitorSize","parseFloat","std_px","heightNum","widthNum","closeBtn","submitBtn","addEventListener"],"sources":["../src/cals.js"],"sourcesContent":["(function () {\n  // ==================== CONSTANTS ====================\n\n  /**\n   * UI 요소 ID 상수\n   * @const {Object}\n   */\n  const ELEMENT_IDS = {\n    CONTAINER: 'dkInspect_cals',\n    INPUT_HEIGHT: 'dkInspect_input_height',\n    INPUT_WIDTH: 'dkInspect_input_width',\n    BTN_SUBMIT: 'dkInspect_btn_submit',\n    BTN_CLOSE: 'dkInspect_btn_close',\n    RESULT: 'dkInspect_cals_result',\n  };\n\n  /**\n   * CSS 클래스 상수\n   * @const {Object}\n   */\n  const CSS_CLASSES = {\n    PROPERTY: 'dkInspect_property',\n    BUTTON: 'btn',\n  };\n\n  /**\n   * 스토리지 키 상수\n   * @const {Object}\n   */\n  const STORAGE_KEYS = {\n    RESOLUTIONS: 'resolutions',\n    MONITORS: 'monitors',\n  };\n\n  /**\n   * 계산 상수\n   * @const {Object}\n   */\n  const CALCULATION_CONSTANTS = {\n    MM_PER_INCH: 25.4,\n    DECIMAL_PLACES_STANDARD: 2,\n    DECIMAL_PLACES_RESULT: 1,\n  };\n\n  /**\n   * 기본 에러 메시지\n   * @const {Object}\n   */\n  const ERROR_MESSAGES = {\n    INVALID_INPUT: '유효하지 않은 입력값입니다.',\n    MISSING_ELEMENT: '필수 요소를 찾을 수 없습니다.',\n    STORAGE_ERROR: '저장소에서 데이터를 읽을 수 없습니다.',\n    CALCULATION_ERROR: '계산 중 오류가 발생했습니다.',\n  };\n\n  // ==================== UTILITY FUNCTIONS ====================\n\n  // document 객체와 html 요소를 변수에 할당합니다.\n  const doc = document;\n\n  /**\n   * ID를 인자로 받아 해당 ID를 가진 DOM 요소를 반환합니다.\n   *\n   * @function $\n   * @param {string} id - 찾고자 하는 요소의 ID\n   * @returns {HTMLElement|null} 찾은 DOM 요소 또는 null\n   * @example\n   * const element = $('myElementId');\n   */\n  const $ = function (id) {\n    try {\n      if (!id || typeof id !== 'string') {\n        console.error('Invalid ID provided to $ function:', id);\n        return null;\n      }\n      return document.getElementById(id);\n    } catch (error) {\n      console.error('Error in $ function:', error);\n      return null;\n    }\n  };\n\n  /**\n   * Chrome Storage Sync API를 이용하여 저장된 데이터를 읽어오는 함수입니다.\n   *\n   * @async\n   * @function readData\n   * @param {string} myKey - 읽어올 데이터의 키\n   * @returns {Promise<Object>} 저장소에서 읽어온 데이터를 포함한 Promise 객체\n   * @throws {Error} 스토리지 읽기 실패 시 에러\n   * @example\n   * const data = await readData('myKey');\n   */\n  function readData(myKey) {\n    return new Promise((resolve, reject) => {\n      try {\n        // 입력 검증\n        if (!myKey || typeof myKey !== 'string') {\n          reject(new Error('Invalid key provided to readData'));\n          return;\n        }\n\n        // Chrome Storage API 사용 가능 여부 확인\n        if (!chrome || !chrome.storage || !chrome.storage.sync) {\n          reject(new Error('Chrome storage API not available'));\n          return;\n        }\n\n        // \"chrome.storage.sync.get\" 함수를 호출하여 데이터를 읽어옵니다.\n        chrome.storage.sync.get(myKey, function (data) {\n          if (chrome.runtime.lastError) {\n            reject(new Error(chrome.runtime.lastError.message));\n            return;\n          }\n          // 읽어온 데이터를 Promise 객체를 통해 반환합니다.\n          resolve(data);\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * 숫자 입력값의 유효성을 검증하는 함수입니다.\n   *\n   * @function validateNumericInput\n   * @param {string|number} value - 검증할 값\n   * @returns {boolean} 유효한 숫자인 경우 true, 그렇지 않으면 false\n   * @example\n   * validateNumericInput('123'); // true\n   * validateNumericInput('abc'); // false\n   */\n  function validateNumericInput(value) {\n    if (value === null || value === undefined || value === '') {\n      return false;\n    }\n    const num = Number(value);\n    return !isNaN(num) && isFinite(num) && num > 0;\n  }\n\n  /**\n   * DOM 요소가 존재하는지 확인하는 함수입니다.\n   *\n   * @function validateElement\n   * @param {HTMLElement|null} element - 검증할 DOM 요소\n   * @param {string} elementName - 요소의 이름 (에러 메시지용)\n   * @returns {boolean} 요소가 존재하면 true, 그렇지 않으면 false\n   */\n  function validateElement(element, elementName) {\n    if (!element) {\n      console.error(`${ERROR_MESSAGES.MISSING_ELEMENT}: ${elementName}`);\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * 에러 메시지를 사용자에게 표시하는 함수입니다.\n   *\n   * @function displayError\n   * @param {string} message - 표시할 에러 메시지\n   * @returns {void}\n   */\n  function displayError(message) {\n    const resultElement = $(ELEMENT_IDS.RESULT);\n    if (resultElement) {\n      resultElement.textContent = '';\n      const errorDiv = doc.createElement('div');\n      errorDiv.style.color = 'red';\n      errorDiv.style.padding = '10px';\n      errorDiv.textContent = `오류: ${message}`;\n      resultElement.appendChild(errorDiv);\n    }\n    alert(`오류: ${message}`);\n  }\n\n  // ==================== MAIN CALCULATOR OBJECT ====================\n\n  const cals = {\n    /**\n     * \"dkInspect_cals\" ID를 가진 \"div\" 요소를 생성하고, 이를 화면에 추가하는 함수입니다.\n     * 계산기 UI의 초기 구조를 생성합니다.\n     *\n     * @function initialize\n     * @memberof cals\n     * @returns {void}\n     * @throws {Error} DOM 요소 생성 또는 추가 실패 시 에러\n     * @example\n     * cals.initialize();\n     */\n    initialize: function () {\n      try {\n        // \"div\" 요소를 생성하고, 이 요소의 ID를 \"dkInspect_cals\"로 설정합니다.\n        const container = doc.createElement('div');\n        container.id = ELEMENT_IDS.CONTAINER;\n\n        // \"h1\" 요소를 생성하고, 이 요소에 \"수동 계산\"이라는 텍스트 노드를 추가합니다.\n        const header = doc.createElement('h1');\n        header.appendChild(doc.createTextNode('수동 계산'));\n        container.appendChild(header);\n\n        // \"div\" 요소를 하나 더 생성하고, 이 요소에 \"ul\" 요소를 추가합니다.\n        const inputContainer = doc.createElement('div');\n        const ul = doc.createElement('ul');\n\n        // 입력 필드 목록\n        const list = [\n          // 높이\n          `<span class='${CSS_CLASSES.PROPERTY}'><label for='${ELEMENT_IDS.INPUT_HEIGHT}'>Height</label></span><span><input type='text' id='${ELEMENT_IDS.INPUT_HEIGHT}'> px</span>`,\n          // 너비\n          `<span class='${CSS_CLASSES.PROPERTY}'><label for='${ELEMENT_IDS.INPUT_WIDTH}'>Width</label></span><span><input type='text' id='${ELEMENT_IDS.INPUT_WIDTH}'> px</span>`,\n          // 하단 버튼\n          `<span style='float:right'><button id='${ELEMENT_IDS.BTN_SUBMIT}' class='${CSS_CLASSES.BUTTON}'>확인</button><button id='${ELEMENT_IDS.BTN_CLOSE}' class='${CSS_CLASSES.BUTTON}'>닫기</button></span>`,\n        ];\n\n        // \"li\" 요소를 생성하고, \"ul\" 요소에 추가합니다.\n        list.forEach((item) => {\n          const li = doc.createElement('li');\n          li.innerHTML = item;\n          ul.appendChild(li);\n        });\n\n        // \"ul\" 요소를 \"div\" 요소에 추가합니다.\n        inputContainer.appendChild(ul);\n        container.appendChild(inputContainer);\n\n        // 결과를 출력할 \"div\" 요소를 생성하고, 이 요소의 ID를 \"dkInspect_cals_result\"로 설정합니다.\n        const result = doc.createElement('div');\n        result.id = ELEMENT_IDS.RESULT;\n        container.appendChild(result);\n\n        // 새로 생성한 \"div\" 요소를 \"body\" 요소에 추가합니다.\n        const body = window.document.getElementsByTagName('BODY')[0];\n        if (!body) {\n          throw new Error('Body element not found');\n        }\n        body.appendChild(container);\n      } catch (error) {\n        console.error('Error in initialize:', error);\n        displayError('UI 초기화에 실패했습니다.');\n      }\n    },\n\n    /**\n     * \"dkInspect_cals\" ID를 가진 \"div\" 요소를 제거하는 함수입니다.\n     * 계산기 UI를 화면에서 제거합니다.\n     *\n     * @function close\n     * @memberof cals\n     * @returns {void}\n     * @throws {Error} 요소 제거 실패 시 에러\n     * @example\n     * cals.close();\n     */\n    close: function () {\n      try {\n        // \"dkInspect_cals\" ID를 가진 \"div\" 요소를 가져와 변수에 할당합니다.\n        const container = $(ELEMENT_IDS.CONTAINER);\n\n        if (!validateElement(container, ELEMENT_IDS.CONTAINER)) {\n          return;\n        }\n\n        // \"body\" 요소에서 \"container\" 요소를 제거합니다.\n        const body = window.document.getElementsByTagName('BODY')[0];\n        if (!body) {\n          throw new Error('Body element not found');\n        }\n\n        body.removeChild(container);\n      } catch (error) {\n        console.error('Error in close:', error);\n        // 닫기 실패는 심각한 문제가 아니므로 사용자에게 알리지 않음\n      }\n    },\n\n    /**\n     * 입력 필드에서 값을 가져와 계산을 수행한 다음, 결과를 화면에 출력하는 함수입니다.\n     *\n     * @async\n     * @function submit\n     * @memberof cals\n     * @returns {Promise<void>} 비동기 작업 완료를 나타내는 Promise\n     * @throws {Error} 입력값 검증 실패 또는 계산 중 에러 발생 시\n     * @example\n     * await cals.submit();\n     */\n    submit: async function () {\n      try {\n        // 입력 요소들을 가져옵니다.\n        const heightInput = $(ELEMENT_IDS.INPUT_HEIGHT);\n        const widthInput = $(ELEMENT_IDS.INPUT_WIDTH);\n\n        // 요소 존재 여부 확인\n        if (!validateElement(heightInput, 'Height Input') ||\n            !validateElement(widthInput, 'Width Input')) {\n          displayError(ERROR_MESSAGES.MISSING_ELEMENT);\n          return;\n        }\n\n        // \"dkInspect_input_height\"와 \"dkInspect_input_width\" ID를 가진 입력 필드의 값을 가져옵니다.\n        const h = heightInput.value;\n        const w = widthInput.value;\n\n        // 입력값 검증\n        if (!validateNumericInput(h) || !validateNumericInput(w)) {\n          displayError(ERROR_MESSAGES.INVALID_INPUT + ' 양수 숫자만 입력 가능합니다.');\n          return;\n        }\n\n        // \"setDiagonal\" 함수를 호출하여 계산을 수행합니다.\n        await cals.setDiagonal(h, w, function (cb) {\n          try {\n            // 결과를 출력하기 위해 \"dkInspect_cals_result\" ID를 가진 요소를 찾아 가져옵니다.\n            const res = $(ELEMENT_IDS.RESULT);\n\n            if (!validateElement(res, 'Result Container')) {\n              return;\n            }\n\n            // 이전 내용을 모두 지우고, \"h2\" 요소를 추가하여 \"Results\"라는 텍스트 노드를 출력합니다.\n            res.textContent = '';\n            const header = doc.createElement('h2');\n            header.appendChild(doc.createTextNode('Results'));\n            res.appendChild(header);\n\n            // 입력값과 계산 결과를 \"ul\" 요소에 추가하여 \"dkInspect_cals_result\" 요소에 출력합니다.\n            const list = [\n              `<span class='${CSS_CLASSES.PROPERTY}'> height : </span><span>${cb.height} mm (${h}px)</span>`,\n              `<span class='${CSS_CLASSES.PROPERTY}'> width : </span><span>${cb.width} mm (${w}px)</span>`,\n              `<span class='${CSS_CLASSES.PROPERTY}'> diagonal : </span><span>${cb.diagonal} mm (${cb.diagonal_px}px)</span>`,\n            ];\n\n            // \"list\" 배열에 저장된 값들을 이용하여 \"ul\" 요소를 생성하고, 이 요소에 \"li\" 요소들을 추가합니다.\n            const ul = doc.createElement('ul');\n            list.forEach((item) => {\n              // \"li\" 요소를 생성하고, 해당 요소에 \"innerHTML\" 속성을 이용하여 값을 할당합니다.\n              const li = doc.createElement('li');\n              li.innerHTML = item;\n\n              // 생성된 \"li\" 요소를 \"ul\" 요소에 추가합니다.\n              ul.appendChild(li);\n            });\n\n            // \"ul\" 요소를 \"dkInspect_cals_result\" 요소에 추가합니다.\n            res.appendChild(ul);\n\n            // 해상도와 모니터 크기 정보를 \"span\" 요소에 추가하여 \"dkInspect_cals_result\" 요소에 출력합니다.\n            const span = doc.createElement('span');\n            span.textContent =\n              ' * 기준 : ' + cb.resolution + ' (' + cb.monitor + ' inch)';\n            res.appendChild(span);\n          } catch (error) {\n            console.error('Error in submit callback:', error);\n            displayError('결과 표시 중 오류가 발생했습니다.');\n          }\n        });\n      } catch (error) {\n        console.error('Error in submit:', error);\n        displayError(ERROR_MESSAGES.CALCULATION_ERROR);\n      }\n    },\n\n    /**\n     * 입력받은 높이와 너비를 사용하여 모니터의 대각선 길이, 해상도, 픽셀당 mm 길이를 계산하는 함수입니다.\n     *\n     * @async\n     * @function setDiagonal\n     * @memberof cals\n     * @param {string|number} h - 높이 값 (픽셀 단위)\n     * @param {string|number} w - 너비 값 (픽셀 단위)\n     * @param {Function} callback - 계산 결과를 전달받을 콜백 함수\n     * @param {Object} callback.result - 계산 결과 객체\n     * @param {string} callback.result.monitor - 모니터 크기 (인치)\n     * @param {string} callback.result.resolution - 해상도\n     * @param {string} callback.result.height - 계산된 높이 (mm)\n     * @param {string} callback.result.width - 계산된 너비 (mm)\n     * @param {string} callback.result.diagonal - 계산된 대각선 길이 (mm)\n     * @param {string} callback.result.diagonal_px - 계산된 대각선 길이 (픽셀)\n     * @returns {Promise<void>} 비동기 작업 완료를 나타내는 Promise\n     * @throws {Error} 스토리지 읽기 실패 또는 계산 중 에러 발생 시\n     * @example\n     * await cals.setDiagonal(1920, 1080, (result) => {\n     *   console.log(result.diagonal);\n     * });\n     */\n    setDiagonal: async function (h, w, callback) {\n      try {\n        // 입력값 검증\n        if (!validateNumericInput(h) || !validateNumericInput(w)) {\n          throw new Error(ERROR_MESSAGES.INVALID_INPUT);\n        }\n\n        if (typeof callback !== 'function') {\n          throw new Error('Callback must be a function');\n        }\n\n        // \"chrome.storage.sync\" API를 이용하여 저장된 \"resolutions\"와 \"monitors\" 값을 가져옵니다.\n        const resolutionsData = await readData(STORAGE_KEYS.RESOLUTIONS);\n        const monitorsData = await readData(STORAGE_KEYS.MONITORS);\n\n        // 데이터 검증\n        if (!resolutionsData || !resolutionsData.resolutions) {\n          throw new Error(`${ERROR_MESSAGES.STORAGE_ERROR}: resolutions`);\n        }\n        if (!monitorsData || !monitorsData.monitors) {\n          throw new Error(`${ERROR_MESSAGES.STORAGE_ERROR}: monitors`);\n        }\n\n        const { resolutions } = resolutionsData;\n        const { monitors } = monitorsData;\n\n        // 계산 결과를 저장할 객체를 생성합니다.\n        const cb = {};\n        cb.monitor = monitors;\n        cb.resolution = resolutions;\n\n        // 해상도의 가로 세로 값을 구합니다.\n        const std_res = cb.resolution.split('x');\n\n        if (std_res.length !== 2) {\n          throw new Error('Invalid resolution format');\n        }\n\n        const resWidth = parseInt(std_res[0]);\n        const resHeight = parseInt(std_res[1]);\n\n        if (!validateNumericInput(resWidth) || !validateNumericInput(resHeight)) {\n          throw new Error('Invalid resolution values');\n        }\n\n        // 가로 세로 값을 이용하여 표준 대각선 길이를 구합니다.\n        const std_diagonal = Math.sqrt(\n          Math.pow(resWidth, 2) + Math.pow(resHeight, 2),\n        ).toFixed(CALCULATION_CONSTANTS.DECIMAL_PLACES_STANDARD);\n\n        // 모니터 크기 검증\n        const monitorSize = parseFloat(cb.monitor);\n        if (!validateNumericInput(monitorSize)) {\n          throw new Error('Invalid monitor size');\n        }\n\n        // 표준 대각선 길이를 이용하여 픽셀당 mm 길이를 구합니다.\n        const std_px = CALCULATION_CONSTANTS.MM_PER_INCH / (std_diagonal / monitorSize); // mm 기준\n\n        // 입력값을 숫자로 변환\n        const heightNum = parseFloat(h);\n        const widthNum = parseFloat(w);\n\n        // 입력받은 높이와 너비를 이용하여, 실제 높이와 너비를 구합니다.\n        cb.height = (heightNum * std_px).toFixed(CALCULATION_CONSTANTS.DECIMAL_PLACES_RESULT); // to mm\n        cb.width = (widthNum * std_px).toFixed(CALCULATION_CONSTANTS.DECIMAL_PLACES_RESULT); // to mm\n        cb.diagonal = Math.sqrt(\n          Math.pow(cb.width, 2) + Math.pow(cb.height, 2),\n        ).toFixed(CALCULATION_CONSTANTS.DECIMAL_PLACES_RESULT); // to mm\n\n        // 입력받은 높이와 너비를 이용하여 대각선 길이(px)를 구합니다.\n        cb.diagonal_px = Math.sqrt(\n          Math.pow(heightNum, 2) + Math.pow(widthNum, 2)\n        ).toFixed(CALCULATION_CONSTANTS.DECIMAL_PLACES_RESULT); // to px\n\n        // 계산 결과를 콜백 함수에 전달합니다.\n        callback(cb);\n      } catch (error) {\n        console.error('Error in setDiagonal:', error);\n        displayError(error.message || ERROR_MESSAGES.CALCULATION_ERROR);\n        throw error;\n      }\n    },\n  };\n\n  // ==================== INITIALIZATION ====================\n\n  try {\n    // \"dkInspect_cals\" 요소가 없을 경우에만 \"cals.initialize()\" 함수를 호출하여 계산기 UI를 초기화합니다.\n    if (!$(ELEMENT_IDS.CONTAINER)) {\n      cals.initialize();\n    }\n\n    // \"dkInspect_btn_close\" 요소와 \"dkInspect_btn_submit\" 요소에 이벤트 리스너를 추가합니다.\n    const closeBtn = $(ELEMENT_IDS.BTN_CLOSE);\n    const submitBtn = $(ELEMENT_IDS.BTN_SUBMIT);\n\n    if (validateElement(closeBtn, 'Close Button')) {\n      closeBtn.addEventListener('click', cals.close);\n    }\n\n    if (validateElement(submitBtn, 'Submit Button')) {\n      submitBtn.addEventListener('click', cals.submit);\n    }\n  } catch (error) {\n    console.error('Error during initialization:', error);\n    displayError('계산기 초기화에 실패했습니다.');\n  }\n})();\n"],"mappings":"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","ignoreList":[]}